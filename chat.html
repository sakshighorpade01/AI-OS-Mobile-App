<!-- Main Chat Container -->
<div id="chat-container">
    <div class="chat-window">
        <div class="chat-messages" id="chat-messages"></div>
    </div>
</div>

<!-- Hidden Button for Programmatic Trigger (still needed for nav toggle logic) -->
<button class="tool-btn" data-tool="context" style="display: none;">
    <i class="fa-solid fa-network-wired"></i>
</button>

<!-- Context Window (Modal Overlay) -->
<div id="context-window" class="modal-overlay hidden">
    <div class="context-window-panel">
        <div class="context-header">
            <div class="header-left">
                <h2>Chat Sessions</h2>
                <button class="sync-context-btn" title="Refresh Sessions">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <div class="header-right">
                <button class="close-context-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="context-content">
            <!-- Dynamic session list will be injected here -->
        </div>
    </div>
</div>

<!-- Selected Context Viewer (Sidebar for context preview and files) -->
<div id="selected-context-viewer" class="selected-context-viewer">
    <div class="context-viewer-header">
        <h3>Selected Context</h3>
        <button class="close-viewer-btn">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="context-viewer-tabs">
        <button class="viewer-tab active" data-tab="context">
            <i class="fas fa-network-wired"></i>
            <span>Sessions</span>
        </button>
        <button class="viewer-tab" data-tab="files">
            <i class="fas fa-paperclip"></i>
            <span>Files</span>
        </button>
    </div>
    <div class="context-viewer-content">
        <div class="tab-content active" id="context-tab">
            <div class="context-preview-content"></div>
        </div>
        <div class="tab-content" id="files-tab">
            <div class="files-preview-content"></div>
        </div>
    </div>
</div>

<!-- Templates -->
<template id="session-detail-template">
    <div class="session-details-view">
        <div class="session-header">
            <button class="back-button">
                <i class="fas fa-arrow-left"></i>
                Back
            </button>
            <h3></h3>
        </div>
        <div class="conversation-history">
            <div class="conversation-header">
                <h3>Conversation History</h3>
            </div>
            <div class="conversation-messages">
                <!-- History content goes here -->
            </div>
        </div>
    </div>
</template>

<template id="session-item-template">
    <div class="session-item">
        <div class="session-select">
            <input type="checkbox" class="session-checkbox" />
        </div>
        <div class="session-content">
            <h3></h3>
            <div class="session-meta">
                <div class="meta-item">
                    <i class="far fa-clock"></i>
                    <span class="session-date"></span>
                </div>
                <div class="meta-item">
                    <i class="far fa-comments"></i>
                    <span class="message-count"></span>
                </div>
            </div>
        </div>
    </div>
</template>

<template id="selection-controls-template">
    <div class="selection-controls">
        <div class="selection-actions hidden">
            <span class="selected-count">0 selected</span>
            <button class="use-selected-btn">Use Selected</button>
            <button class="clear-selection-btn">Clear</button>
        </div>
    </div>
</template>
