<!-- Main Chat Container -->
<div id="chat-container">
    <div class="chat-window">
        <div class="chat-messages" id="chat-messages">
        </div>
    </div>
</div>

<!-- Hidden Button for Programmatic Trigger -->
<button class="tool-btn" data-tool="context" style="display: none;">
    <i class="fa-solid fa-network-wired"></i>
</button>

<!-- Context Window (Modal Overlay) -->
<div id="context-window" class="modal-overlay hidden">
    <div class="context-window-panel">
        <div class="context-header">
            <div class="header-left">
                <h2>Chat Sessions</h2>
                <button class="sync-context-btn" title="Refresh Sessions">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <div class="header-right">
                <button class="close-context-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <div class="context-content">
            <div id="context-list-view"></div>
            <div id="context-detail-view" class="hidden"></div>
        </div>
    </div>
</div>

<!-- Selected Context Viewer (This is for the main UI, not the session detail view) -->
<div id="selected-context-viewer" class="selected-context-viewer">
    <!-- ... content ... -->
</div>

<!-- ★★★ UPDATED TEMPLATE FOR SESSION DETAIL VIEW ★★★ -->
<template id="session-detail-template">
    <div class="session-details-view">
        <div class="session-header">
            <button class="back-button" title="Back">
                <i class="fas fa-arrow-left"></i>
                <span>Back</span>
            </button>
            <h3></h3> <!-- Session title will be injected here -->
        </div>
        <div class="conversation-history">
            <div class="conversation-messages">
                <!-- History content will be generated by JS here -->
            </div>
        </div>
    </div>
</template>

<!-- Other templates remain unchanged -->
<template id="session-item-template">
    <!-- ... content ... -->
</template>
<template id="selection-controls-template">
    <!-- ... content ... -->
</template>